# FinSight

## Общие сведения
FinSight — веб-приложение для мониторинга финансовых операций и генерации отчётов. Пользователи могут записывать доходы и расходы, просматривать историю транзакций и получать аналитические отчёты на основе накопленных данных.

## Содержание
1. [Возможности](#возможности)
2. [Технологический стек](#технологический-стек)
3. [Архитектура](#архитектура)
4. [Схема базы данных](#схема-базы-данных)
5. [API эндпоинты](#api-эндпоинты)
6. [Установка](#установка)
7. [Использование](#использование)
8. [Участие в разработке](#участие-в-разработке)
9. [Лицензия](#лицензия)

## Возможности
- Запись операций по доходам и расходам.
- Просмотр и фильтрация транзакций по дате, категории, сумме, статусу, банкам и контрагентам.
- Редактирование и удаление транзакций со статусом «Новая».
- Интерактивные диаграммы и графики: доходы против расходов, динамика транзакций и распределение по категориям.
- Экспорт отчётов в формате Excel и PDF.
- Управление несколькими банковскими счетами и контрагентами.
- Аналитика в реальном времени: количество операций, тенденции дебет/кредит, статистика по банкам и категориям.

## Технологический стек
- **Backend**: REST API на Java
- **База данных**: PostgreSQL
- **Frontend**: React

## Архитектура
FinSight реализует клиент-серверную модель:
- **REST API**: отвечает за аутентификацию, операции с транзакциями, управление пользователями и аналитические данные.
- **React Frontend**: обеспечивает адаптивный пользовательский интерфейс для ввода данных, визуализации и экспорта отчётов.
- **PostgreSQL**: хранит пользователей, счета, контрагентов, транзакции, категории, банки и справочные данные.

## Схема базы данных
- **users**: id, email, телефон, ИИН, hash_пароля, имя.
- **accounts**: id, user_id, bank_id, номер_счёта.
- **counterparties**: id, название, ИНН, номер_счёта, телефон, entity_type_id, bank_id.
- **entity_types**: id, название (физлицо, юрлицо).
- **transactions**: id, sender_account_id, receiver_account_id, counterparty_id, date_time, amount, transaction_type_id, transaction_status_id, category_id, комментарий.
- **transaction_types**: id, название (поступление, списание).
- **transaction_statuses**: id, название (новая, подтверждённая, в обработке, отменена, выполнена, удалена).
- **categories**: id, название, entity_type_id.
- **banks**: id, название.

## API эндпоинты
Полная спецификация API доступна в формате OpenAPI 3.1.0.

### Аутентификация
- `POST /register` — регистрация нового пользователя с указанием профиля и первоначального счёта.
- `POST /login` — вход и получение JWT-токена.

### Профиль пользователя
- `GET /user/profile` — получить данные профиля.
- `PUT /user/profile` — обновить данные профиля.

### Счета
- `GET /user/accounts` — список счетов пользователя.
- `POST /user/accounts` — добавить новый счёт.
- `DELETE /user/accounts/{id}` — удалить счёт.

### Контрагенты
- `GET /user/counterparties` — список контрагентов.
- `POST /user/counterparties` — добавить контрагента.
- `DELETE /user/counterparties/{id}` — удалить контрагента.

### Транзакции
- `GET /user/transactions` — список транзакций с возможностью фильтрации (дата, сумма, банк, статус, ИНН, тип, категория).
- `POST /user/transactions` — создать транзакцию (поля: тип лица, дата/время, тип, статус, сумма, комментарий, счёт отправителя, счёт получателя, категория).
- `PUT /user/transactions/{id}` — обновить транзакцию со статусом «Новая».
- `DELETE /user/transactions/{id}` — пометить транзакцию со статусом «Новая» как удалённую.

### Отчёты
- `GET /user/reports` — экспорт отфильтрованных транзакций в Excel или PDF.

### Справочники
- `GET /banks` — список банков.
- `GET /categories` — список категорий.

## Установка
1. Клонировать репозиторий:
   ```bash
   git clone https://github.com/yourusername/FinSight.git
   cd FinSight
   ```
2. **Backend**:
   - Настроить PostgreSQL и обновить `application.properties` с учётными данными БД.
   - Собрать и запустить:
     ```bash
     mvn clean install
     java -jar target/finsight-api.jar
     ```
3. **Frontend**:
   - Перейти в папку `frontend`.
   - Установить зависимости и запустить:
     ```bash
     npm install
     npm start
     ```

## Использование
1. Зарегистрироваться и войти в систему.
2. Добавить банковские счета в разделе «Счета».
3. Записывать транзакции и назначать категории.
4. Анализировать данные с помощью фильтров и графиков.
5. Экспортировать отчёты в разделе «Отчёты».

## Участие в разработке
1. Форкнуть репозиторий.
2. Создать ветку: `git checkout -b feature/название-фичи`.
3. Внести изменения и зафиксировать: `git commit -m "Добавить новую фичу"`.
4. Отправить ветку: `git push origin feature/название-фичи`.
5. Создать Pull Request.
